<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="styles.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="moment.min.js"></script>
  </head>
  <body>
  <h2> Tweetlers </h2>
  <div class="container">
  </div>

    <script>

      $(document).ready(function(){

        var _template = `<div><div class="twt">
        <div class="twt__header">
        <span class="twt__fullname"></span>
        <span class="twt__user"></span>
        <span class="twt__timestamp"></span>
        </div>
        <div class="twt__message"></div>
        </div></div>`;
        // console.log('_template', _template);

        var reload = function() {

          var result = [];
          var index = streams.home.length - 1;

          while(index >= 0){
            var tweet = streams.home[index];

            var $newTweet = $(_template);

            $newTweet.find('.twt__fullname').text(tweet.user);
            $newTweet.find('.twt__user').text('@' + tweet.user);
            $newTweet.find('.twt__timestamp').text(' ' + moment(tweet.created_at).fromNow());
            // $newTweet.find('.twt__timestamp').text(' ' + tweet.created_at.toUTCString());
            $newTweet.find('.twt__message').text(tweet.message);

            result.push($newTweet.html().trim())
            index -= 1;
          }

          var $newTweetHtml = $(result.join(''));
          $newTweetHtml.appendTo('.container');

          // setTimeout(($('.container').html('')), 2000);

          // setTimeout(reload, 2000);

          // var myItems = [];
          // var myList = $( "#myList" );
          //
          // for ( var i = 0; i < 100; i++ ) {
          //     myItems.push( "<li>item " + i + "</li>" );
          // }
          //
          // myList.append( myItems.join( "" ) );


        }
        reload();
      });



      // Initial function
      // $(document).ready(function(){
      //   var $body = $('body');
      //   $body.html('');
      //
      //   var index = streams.home.length - 1;
      //   while(index >= 0){
      //     var tweet = streams.home[index];
      //     var $tweet = $('<div></div>');
      //     $tweet.text('@' + tweet.user + ': ' + tweet.message);
      //     $tweet.appendTo($body);
      //     index -= 1;
      //   }
      // });

    </script>
  </body>
</html>
